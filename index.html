<!DOCTYPE html>
<html>
<head>
	<title>Har Replay- Network Performance</title>
</head>
<body>
	
	<div id="chart" style="width:100%; height:800px"></div>
	<h3>450 Requests, size: 2.5mb approx</h3>
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="http://code.highcharts.com/highcharts.js"></script>
	<script>
		$.getJSON("log.json",function (log) {
			//$.getJSON("avg_log.json",function (avg) {
				var avg = [];
				/*avg.forEach(function (v) {
					v[0] = Date.parse(v[0]);
				});*/

				log.forEach(function (v) {
					v[0] = Date.parse(v[0]);
					avg.push([v[0], (v[1]/250)]);
				});
				console.log(avg);
				$('#chart').highcharts({
			        chart: {
			            type: 'spline'
			        },
			        plotOptions: {
			            series: {
			                marker: {
			                    enabled: false
			                }
			            }
			        },
			        title: {
			            text: 'LLV Map Services Network Performance'
			        },
			        subtitle: {
			            text: 'ArcGIS Cache services'
			        },
			        xAxis: {
			            type: 'datetime',
			            tickInterval: 1000 * 60 * 60 * 6,
			            
			           min: log[0][0],
			           max: log[log.length -1 ][0],
			           dateTimeLabelFormats : {
			                   hour: '%I %p',
			                   minute: '%I:%M %p'
			             }
			        },
			        yAxis: {
			            title: {
			                text: 'Total Response Time (secs)'
			            },
			            min: 0,
			            max: 2000

			        },
			        /*tooltip: {
			            headerFormat: '<b>{series.name}</b><br>',
			            pointFormat: '{point.x:%e. %b}: {point.y:.2f} m'
			        },*/

			        series: [{
			            name: 'Total Time',
			            data: log
			        },{
			        	name: 'Average Time',
			        	data: avg
			        }]
	    		});
			//});
		});
	</script>
</body>
</html>